# TODO:
# * checkers: sanitizers, valgrind, CSA, Coverity

name: CI
on: [push, pull_request]
jobs:
  Tests:
    strategy:
      fail-fast: false
      matrix:
        os: [ubuntu-18.04, ubuntu-20.04, ubuntu-latest]
        cc: [gcc, clang]
    runs-on: ${{ matrix.os }}
    steps:
    - uses: actions/checkout@v2
    - name: Install deps
      run: sudo apt-get -y install gdb
    - name: Run tests
      run: scripts/travis.sh
  Coverage:
    runs-on: ubuntu-latest
    env:
      COVERAGE: 1
      CODECOV_TOKEN: a55c21ce-0e07-465b-97fe-34202f889cf8
    steps:
    - uses: actions/checkout@v2
    - name: Install deps
      run: sudo apt-get -y install gdb
    - name: Run tests
      run: scripts/travis.sh
